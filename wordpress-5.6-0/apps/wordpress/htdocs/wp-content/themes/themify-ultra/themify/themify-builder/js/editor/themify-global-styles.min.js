'use strict';(function(c,g,f){const e=function(){this.form=f.getElementById("tb_admin_new_gs");this.loadAddNewForm();this.addNew();this.deleteStyle();this.restore();this.scalePreview()},d=themifyGlobalStylesVars;e.prototype.addNew=function(){const a=f.getElementsByClassName("tb_admin_save_gs")[0],b=this;a&&a.addEventListener("click",function(a){a.preventDefault();b.validateForm()?(a.target.text=d.messages.creating,c.ajax({type:"POST",url:d.ajaxurl,dataType:"json",data:{action:"tb_save_custom_global_style",
nonce:d.nonce,form_data:c(b.form).serialize()},success(b){"failed"===b.status?(alert(b.msg),a.target.text=d.messages.create):"success"===b.status?g.location=b.url:a.target.text=d.messages.create}})):alert(d.messages.formValid)})};e.prototype.validateForm=function(){let a=!0;c.each(c(this.form).serializeArray(),function(b,c){if(""==c.value)return a=!1});return a};e.prototype.loadAddNewForm=function(){const a=c(".tb_add_new_gs");0!==a.length&&a.magnificPopup({type:"inline",midClick:!0,callbacks:{close(){f.getElementById("tb_admin_new_gs").reset()}}})};
e.prototype.deleteStyle=function(){const a=c(".tb_remove_gs");if(0!==a.length)a.on("click",function(a){a.preventDefault();const b=c(this);a=b.parents(".tb_admin_gs_list").data("list");confirm("publish"===a?themifyGlobalStylesVars.messages.deleteConfirm:themifyGlobalStylesVars.messages.deleteConfirm2)&&(b.parents(".tb_gs_element").fadeOut(),c.ajax({type:"POST",url:d.ajaxurl,dataType:"json",data:{action:"tb_delete_global_style",nonce:d.nonce,status:a,id:b.attr("data-id")},success(a){"failed"===a.status&&
(alert(a.msg),b.parents(".tb_gs_element").fadeIn())}}))})};e.prototype.restore=function(){const a=c(".tb_gs_restore");if(0!==a.length)a.on("click",function(a){a.preventDefault();const b=c(this);b.parents(".tb_gs_element").fadeOut();c.ajax({type:"POST",url:d.ajaxurl,dataType:"json",data:{action:"tb_restore_global_style",nonce:d.nonce,id:b.attr("data-id")},success(a){"failed"===a.status&&(alert(a.msg),b.parents(".tb_gs_element").fadeIn())}})})};e.prototype.scalePreview=function(){c(".themify_builder_content").each(function(){let a=
c(this);var b=a.parent();b=Math.min(b.width()/a.outerWidth(),b.height()/a.outerHeight());a.css({transform:"translate(-50%, -50%) scale("+b+")"})})};new e})(jQuery,window,document);
