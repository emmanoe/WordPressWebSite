'use strict';(function(D,p,v,x,r,f,H){function P(d){function e(a){let b="";for(let c in a)b+=a[c];r.body.insertAdjacentHTML("beforeend",b);d&&d()}if(f.Forms.LayoutPart.init)d&&d();else{var a=function(){if(themifyBuilder.debug)return!1;try{let a=localStorage.getItem("tb_visual_templates"),b="";if(!a)return!1;a=JSON.parse(a);for(let a in themifyBuilder.modules)b+=a;return a.ver.toString()!==themify_vars.version.toString()||a.h!==p.hash(b)?!1:a.val}catch(c){}return!1}();a?e(a):D.ajax({type:"POST",url:themifyBuilder.ajaxurl,
dataType:"json",data:{action:"tb_load_visual_templates",tb_load_nonce:themifyBuilder.tb_load_nonce},success(a){if(a){e(a);try{let c="";for(var b in themifyBuilder.modules)c+=b;const d={val:a,ver:themify_vars.version,h:p.hash(c)};localStorage.setItem("tb_visual_templates",JSON.stringify(d))}catch(g){}}}})}}function Q(){for(var d=x.document.getElementsByClassName("tb_middle_bar"),e=function(a){var b=a.clientX,c="tb_right_bar"===this.id?"right":"left",d=tbLocalScript.breakpoints,e=f.toolbar.$el.width(),
m=f.iframe.css("transition","none").width(),l=x.document.getElementsByClassName("tb_vertical_change_tooltip")[0],q=x.document.getElementsByClassName("tb_vertical_bars")[0],t=r.createElement("div");t.className="tb_mousemove_cover";void 0!==l&&l.parentNode.removeChild(l);l=r.createElement("div");l.className="tb_vertical_change_tooltip";this.appendChild(l);q.appendChild(t);q.className+=" tb_resizing_start";f.iframe[0].classList.add("tb_resizing_start");D(v);var n=function(a){a=a.clientX-b;a*=2;"left"===
c&&(a=-a);var g=320>m+a?320:m+a;g<=d.mobile?a="mobile":g<=d.tablet[1]?a="tablet":g<=d.tablet_landscape[1]?a="tablet_landscape":(a="desktop",g>e-17&&(g=e));l.textContent=g+"px";f.iframe.css("width",g);f.activeBreakPoint!==a&&ThemifyConstructor.lightboxSwitch(a)};t.addEventListener("mousemove",n,{passive:!0});t.addEventListener("mouseup",function G(a){t.removeEventListener("mousemove",n,{passive:!0});t.removeEventListener("mouseup",G,{once:!0,passive:!0});t.parentNode.removeChild(t);l.parentNode.removeChild(l);
f.iframe.css("transition","");q.classList.remove("tb_resizing_start");f.iframe[0].classList.remove("tb_resizing_start");f.Utils._onResize(!0)},{once:!0,passive:!0})},a=d.length-1;-1<a;--a)d[a].addEventListener("mousedown",e,{passive:!0});d=null}const K=[],L=[],M={},N={};f.mode="visual";f.iframe="";f.id="";f.is_ajax_call=!1;f.Mixins.Frontend={render_visual(d){const e={},a=p.convert(this.el.querySelectorAll("[data-cid]"));a.unshift(this.el);for(let c=0,b=a.length;c<b;++c){let b=f.Models.Registry.lookup(a[c].getAttribute("data-cid"));
b&&(e[b.cid]=b.toJSON())}f.bootstrap(e,d)},change_callback(){const d=this.$el;d[0].insertAdjacentHTML("afterbegin",'<span class="tf_lazy tb_preview_component"></span>');this.render_visual(function(){d.find(".tb_preview_component").remove();f.Utils.setCompactMode(d[0].getElementsByClassName("module_column"));const e="row"===f.eventName?d.data("cid"):f.beforeEvent.data("cid");f.undoManager.push(e,f.beforeEvent,d,f.eventName);f.Mixins.Builder.update(d)})},createEl(d){var e=this.model.get("elType"),a=
r.createElement("div");a.innerHTML=d;d=a.getElementsByClassName("module_"+e)[0];var c=d.classList,b=d.attributes;a=0;for(var g=c.length;a<g;++a)this.el.classList.add(c[a]);for(a=b.length-1;-1<a;--a)"class"!==b[a].name&&(c=b[a].name,this.el.setAttribute(c,b[a].value),0===c.indexOf("data-")&&this.$el.data(c.replace("data-",""),b[a].value));c=d.getElementsByClassName("builder_row_cover")[0];g=d.getElementsByClassName("tbp_dc_styles")[0];b=d.getElementsByClassName(e+"-slider")[0];const h=d.getElementsByClassName("tb_row_frame");
if(void 0!==h[0]&&h[0].parentNode===d){const b=r.createDocumentFragment(),c=this.el.getElementsByClassName("tb_row_frame");for(a=c.length-1;-1<a;--a)c[a].parentNode.removeChild(c[a]);for(a=h.length-1;-1<a;--a)h[a].parentNode===d&&b.appendChild(h[a].cloneNode());this.el.insertBefore(b,this.el.firstChild)}void 0!==g&&g.parentNode===d&&(a=this.el.getElementsByClassName("tbp_dc_styles")[0],void 0!==a?this.el.replaceChild(g,a):this.el.appendChild(g));void 0!==c&&c.parentNode===d&&(a=this.el.getElementsByClassName("builder_row_cover")[0],
void 0!==a?this.el.replaceChild(c,a):this.el.insertAdjacentElement("afterbegin",c));void 0!==b&&b.parentNode===d&&(e=this.el.getElementsByClassName(e+"-slider")[0],void 0!==e?this.el.replaceChild(b,e):this.el.insertAdjacentElement("afterbegin",b))},restoreHtml(d){var e=r.createElement("div");e.innerHTML=d;d=D(e.firstChild);e=f.liveStylingInstance.$liveStyledElmt;const a=p.convert(d[0].querySelectorAll("[data-cid]"));a.unshift(d[0]);for(let c=a.length-1;-1<c;--c){let b=f.Models.Registry.lookup(a[c].getAttribute("data-cid"));
b&&b.trigger("change:view",a[c])}e.replaceWith(d);f.Mixins.Builder.update(d)}};f.previewVisibility=function(){const d=this.$el,e="row"===this.model.get("elType")?this.model.get("styling"):this.model.get("mod_settings");if(f.isPreview){"hide_all"===e.visibility_all?d.addClass("hide-all"):("hide"===e.visibility_desktop&&d.addClass("hide-desktop"),"hide"===e.visibility_tablet&&d.addClass("hide-tablet"),"hide"===e.visibility_tablet_landscape&&d.addClass("hide-tablet_landscape"),"hide"===e.visibility_mobile&&
d.addClass("hide-mobile"));let a=!1;_.isEmpty(e.custom_parallax_scroll_speed)||(a=!0,d[0].dataset.parallaxElementSpeed=parseInt(e.custom_parallax_scroll_speed));_.isEmpty(e.custom_parallax_scroll_reverse)||(d[0].dataset.parallaxElementReverse=!0);_.isEmpty(e.custom_parallax_scroll_fade)||(d[0].dataset.parallaxFade=!0);a&&p.parallaxScrollingInit(d,!0)}else d.removeClass("hide-desktop hide-tablet hide-tablet_landscape hide-mobile hide-all")};_.extend(f.Views.BaseElement.prototype,f.Mixins.Frontend);
f.Views.register_row({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);f.vent.on("dom:preview",f.previewVisibility.bind(this))}});f.Views.register_subrow({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});
f.Views.register_column({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});f.Views.register_module({_jqueryXhr:!1,templateVisual(d){return wp.template("builder-"+this.model.get("mod_name")+"-content")(d)},initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,
"custom:restorehtml",this.restoreHtml);this.listenTo(this.model,"custom:preview:live",this.previewLive);this.listenTo(this.model,"custom:preview:refresh",this.previewReload);f.vent.on("dom:preview",f.previewVisibility.bind(this))},createEl(d){var e=r.createElement("div"),a=r.createElement("div"),c=r.createElement("div"),b=r.createElement("div"),g=r.createElement("div");const h=this.model.get("mod_name");e.innerHTML=d;var k=e.getElementsByClassName("module")[0];e=e.querySelector("#tb_module_styles");
d=null;if(void 0===k)return f.is_ajax_call||(f.Models.Registry.remove(this.model.cid),this.model.destroy()),!1;if(null!==e){d=JSON.parse(e.innerText);for(let a in d)!p.cssLazy[a]&&d[a].s&&(p.cssLazy[a]=!0,p.LoadCss(d[a].s,d[a].v))}g.className="tb_visibility_hint";g.appendChild(f.Utils.getIcon("ti-eye"));this.el.innerHTML=k.innerHTML;this.el.appendChild(g);f.Utils.visibilityLabel(this.el);a.className="tb_data_mod_name";a.innerHTML=themifyBuilder.modules[h].name;c.className="tf_plus_icon tb_column_btn_plus tb_module_btn_plus tb_disable_sorting";
b.className="tb_action_wrap tb_module_action";this.el.appendChild(b);this.el.appendChild(a);this.el.appendChild(c);a=k.attributes;this.el.className=this.attributes().class;c="tb_"+this.model.get("element_id");for(b=a.length-1;-1<b;--b)if("class"===a[b].name)for(g=a[b].value.split(" "),k=g.length-1;-1<k;--k)g[k]=g[k].trim(),c!==g[k]&&""!==g[k]&&this.el.classList.add(g[k]);else g=a[b].name,this.el.setAttribute(g,a[b].value),0===g.indexOf("data-")&&this.$el.data(g.replace("data-",""),a[b].value);if("image"===
h&&!0===p.is_builder_loaded&&!1===f.id){const a=this.el;setTimeout(function(){f.Utils.checkImageSize(a);f.Utils.calculateHeight()},500)}},shortcodeToHTML(d){function e(b){void 0!==a._shortcodeXhr&&4!==a._shortcodeXhr&&a._shortcodeXhr.abort();a._shortcodeXhr=D.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element_shortcode",shortcode_data:JSON.stringify(b),tb_load_nonce:themifyBuilder.tb_load_nonce},success(b){if(b.success){const c=b.data.shortcodes;if(b=b.data.styles)for(let a=
0,c=b.length;a<c;++a)p.LoadCss(b[a].s,b[a].v,null,b[a].m);for(let d=0,g=c.length;d<g;++d)b=p.hash(c[d].key),a.$el.find(".tmp"+b).replaceWith(c[d].html),K[b]=c[d].html,p.is_builder_loaded&&f.Utils.loadContentJs(a.$el,"module")}}})}const a=this,c=[],b=themifyBuilder.available_shortcodes;let g=!1;for(let a=0,e=b.length;a<e;++a)d=wp.shortcode.replace(b[a],d,function(a){a=wp.shortcode.string(a);let b=p.hash(a);void 0===K[b]?(c.push(a),a='<span class="tmp'+b+'">[loading shortcode...]</span>'):a=K[b];g=
!0;return a});g&&0<c.length&&e(c);return{content:d,found:g}},previewLive(d,e,a,c,b){f.is_ajax_call=!1;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();var g=null!==f.activeModel&&c;let h,k=300;d.cid=a?a:f.activeModel.cid;if(!g||!0===e){h=this.templateVisual(d);if(f.is_ajax_call)return;!0===e&&(d=this.shortcodeToHTML(h),d.found&&(k=1E3,h=d.content,g=null))}if(g){a=c.length;if(void 0===a)c.innerHTML=b;else for(g=0;g<a;++g)c[g].innerHTML=b;f.Utils.calculateHeight()}else if(this.createEl(h),
a)f.Utils.calculateHeight();else{f.liveStylingInstance.$liveStyledElmt=this.$el;const a=this;this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(function(){f.Utils.loadContentJs(a.$el,"module");f.Utils.calculateHeight()},k)}},previewReload(d,e,a){function c(a){b.createEl(a);f.liveStylingInstance.$liveStyledElmt=b.$el;f.Utils.loadContentJs(b.$el,"module");b.$el.find(".tb_preview_component").remove();f.Utils.calculateHeight()}if(e&&f.activeModel.cid&&a){const b=e.length;if(void 0===b)e.innerHTML=
a;else for(d=0;d<b;++d)e[d].innerHTML=a;f.Utils.calculateHeight()}else{var b=this;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();f.is_ajax_call=!0;e=this.model.get("mod_name");a=d.unsetKey;b.el.insertAdjacentHTML("afterbegin",'<span class="tb_preview_component tf_lazy"></span>');delete d.cid;delete d.unsetKey;delete d.element_id;d=f.Utils.clear(d);d["module_"+e+"_slug"]=1;d=JSON.stringify(d);var g=p.hash(d);if(void 0===L[g]||a)return this._jqueryXhr=D.ajax({type:"POST",url:themifyBuilder.ajaxurl,
data:{action:"tb_load_module_partial",tb_post_id:themifyBuilder.post_ID,tb_cid:this.model.cid,element_id:this.model.get("element_id"),tb_module_slug:e,tb_module_data:d,tb_load_nonce:themifyBuilder.tb_load_nonce},success(a){L[g]=a;c(a);f.is_ajax_call=b._jqueryXhr=!1},error(){b.$el.removeClass("tb_preview_loading")}}),this;c(L[g])}}});f.bootstrap=function(d,e,a){const c=[];let b=!0;d||(b=!1,d=f.Models.Registry.items);for(let a in d){d=f.Models.Registry.items[a];let g=d.toJSON(),e=g.elType,m=g["module"===
e?"mod_settings":"styling"];if(m&&0<Object.keys(m).length)!0===b&&f.liveStylingInstance.setCss([g],"module"===e?g.mod_name:e);else if("module"!==e)continue;if("module"===e&&"tile"!==g.mod_name&&void 0===g.mod_settings.__dc__&&"ajax"!==themifyBuilder.modules[g.mod_name].type)d.trigger("custom:preview:live",g.mod_settings,"accordion"===g.mod_name||"box"===g.mod_name||"feature"===g.mod_name||"tab"===g.mod_name||"text"===g.mod_name||"plain-text"===g.mod_name||"pointers"===g.mod_name||"pro-image"===g.mod_name||
"countdown"===g.mod_name||"button"===g.mod_name||"pro-slider"===g.mod_name||"timeline"===g.mod_name,a);else{if("column"===e)delete g.modules;else if("row"===e||"module"===e||"subrow"===e){if("row"===e&&"tb-page-break"===m.custom_css_row)continue;delete g.cols}c.push({jobID:a,data:g})}}this.batch_rendering(c,0,360,e,a)};f.batch_rendering=function(d,e,a,c,b){if(e>=d.length)"function"===typeof c&&c.call(this),f.toolbar.pageBreakModule.countModules(),p.trigger("tb_css_visual_modules_load");else{const g=
d.slice(e,e+a);this.render_element(g,b).done(function(){f.batch_rendering(d,e+=a,a,c)})}};f.render_element=function(d,e){d={action:"tb_render_element",tmpGS:e?JSON.stringify(e):"",batch:JSON.stringify(d),tb_load_nonce:themifyBuilder.tb_load_nonce,tb_post_id:themifyBuilder.post_ID};return D.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:d,success(a){for(let c in a)"tb_module_styles"!==c&&"gs"!==c&&f.Models.Registry.lookup(c).trigger("create:element",a[c]);if(a.tb_module_styles){a=
a.tb_module_styles;for(let c in a){let b=a[c].s;!p.cssLazy[c]&&b&&(p.cssLazy[c]=!0,N[b]=!0,p.LoadCss(b,a[c].v,null,null,function(){delete N[b];0===Object.keys(N).length&&p.trigger("tb_css_visual_modules_load")}))}}else p.trigger("tb_css_visual_modules_load")}})};f.render=function(){P(function(){var d=r.getElementsByClassName("themify_builder_content");const e=themifyBuilder.post_ID;let a=null;for(let c=d.length-1;-1<c;--c)d[c].getAttribute("data-postid")!=e?d[c].classList.add("not_editable_builder"):
null===a&&(a=d[c],a.setAttribute("id","themify_builder_content-"+e),a.setAttribute("data-postid",e),a.classList.remove("not_editable_builder"),a.classList.add("tb_active_builder"));d=v["builderdata_"+e]?v["builderdata_"+e].data:[];d=Array.isArray(d)&&0!==d.length?d.filter(function(a){return a&&0<Object.keys(a).length}):{};v["builderdata_"+e]=null;f.id=e;f.Instances.Builder[f.builderIndex]=new f.Views.Builder({el:a,collection:new f.Collections.Rows(d),type:f.mode});f.Instances.Builder[f.builderIndex].render();
d=null;f.bootstrap(null,function(){ThemifyStyles.init(ThemifyConstructor.data,ThemifyConstructor.breakpointsReverse,e);f.liveStylingInstance=new O;f.liveStylingInstance.setCss(f.Mixins.Builder.toJSON(f.Instances.Builder[0].el));setTimeout(Q,2E3);p.on("tb_css_visual_modules_load",function(){const a=x.document.getElementById("tf_svg"),b=r.getElementById("tf_svg");a.parentNode.replaceChild(b,a);f.toolbar.el.style.display="block";x.jQuery("body").trigger("themify_builder_ready");f.Utils.loadContentJs();
p.is_builder_loaded=!0;f.Instances.Builder[f.builderIndex].$el.triggerHandler("tb_init");f.id=!1;setTimeout(function(){f.Utils.checkAllimageSize();f.EdgeDrag.init()},500)},!0)})})};p.body.one("builderiframeloaded.themify",function(d,e){f.iframe=D(e);setTimeout(function(){p.loadAnimateCss()},1);H.setToolbar();f.toolbar=new f.Views.Toolbar({el:"#tb_toolbar"});f.toolbar.render();f.GS.init();p.LoadAsync(tbLocalScript.builder_url+"/js/editor/themify-constructor.js",function(){v.wp.media=v.top.wp.media;
v.MediaElementPlayer=v.top.MediaElementPlayer;jQuery.fn.mediaelementplayer=v.top.jQuery(v.top.document).mediaelementplayer;v.wp.mediaelement=v.top.wp.mediaelement;v.tinyMCE=v.top.tinyMCE;v.tinyMCEPreInit=v.top.tinyMCEPreInit;v.tinymce=v.top.tinymce;v.switchEditors=v.top.switchEditors;v.wpApiSettings=v.top.wpApiSettings;ThemifyConstructor.getForms(f.render)},null,null,function(){return"undefined"!==typeof ThemifyConstructor})});const O=function(d){function e(){this.$context=d("#tb_lightbox_parent",
x.document);this.prefix;this.type;this.group;this.styleTab;this.styleTabId;this.$liveStyledElmt=this.isChanged=this.currentField=null;this.module_rules={};this.rulesCache={};this.tempData;this.undoData;this.currentStyleObj={};this.currentSheet}e.prototype.init=function(a,c){var b=f.activeModel.get("element_id");this.type=f.activeModel.get("elType");this.group="module"===this.type?f.activeModel.get("mod_name"):this.type;if(!0===c&&null!==f.GS.previousModel){b=f.Models.Registry.lookup(f.GS.previousModel);
var g=b.get("elType");"module"===g&&(g=b.get("mod_name"));b=b.get("element_id")}else g=this.group;this.prefix=ThemifyStyles.getBaseSelector(g,b);this.$liveStyledElmt=d(r.querySelector(this.prefix));this.currentStyleObj={};this.tempData={};this.undoData={};this.undoData[f.activeBreakPoint]={};this.tempData[f.activeBreakPoint]={};void 0===this.rulesCache[f.activeBreakPoint]&&(this.rulesCache[f.activeBreakPoint]={});this.currentSheet=this.getSheet(f.activeBreakPoint,c);!0!==a&&("column"!==this.type&&
"subrow"!==this.type&&this.bindAnimation(),this.bindTabsSwitch(),this.initModChange())};e.prototype.setCss=function(a,c,b){a=f.GS.createCss(a,c,void 0);c=[];for(let f in a)if("fonts"===f||"cf_fonts"===f)for(var g in a[f]){var d=g;0<a[f][g].length&&(d+=":"+a[f][g].join(","));c.push(d)}else if("gs"===f){d=a[f];for(let a in d){var e=this.getSheet(a,!0);let b=e.cssRules?e.cssRules:e.rules;for(let c in d[a])!1===this.findIndex(b,c)&&e.insertRule(c+"{"+d[a][c].join("")+";}",b.length)}}else if("bg"!==f){d=
this.getSheet(f,b);e=d.cssRules?d.cssRules:d.rules;for(let b in a[f])!1===this.findIndex(e,b)&&d.insertRule(b+"{"+a[f][b].join("")+";}",e.length)}ThemifyConstructor.font_select.loadGoogleFonts(c.join("|"));return a};e.prototype.findIndex=function(a,c){for(let b=a.length-1;-1<b;--b)if(c===a[b].selectorText.replace(/\s*>\s*/g,">").replace(/,\s/g,","))return b;return!1};e.prototype.renameProp=function(a){if(void 0===M[a]){const c=a;if(-1!==a.indexOf("-")){const b=a.toLowerCase().split("-");a=b[0]+b[1].charAt(0).toUpperCase()+
b[1].slice(1);void 0!==b[2]&&(a+=b[2].charAt(0).toUpperCase()+b[2].slice(1));void 0!==b[3]&&(a+=b[3].charAt(0).toUpperCase()+b[3].slice(1))}return M[c]=a}return M[a]};e.prototype.setLiveStyle=function(a,c,b){b?"string"===typeof b&&(b=[b]):b=[""];b=ThemifyStyles.getNestedSelector(b);let g="";const d=this.currentSheet.cssRules?this.currentSheet.cssRules:this.currentSheet.rules;for(let a=0,c=b.length;a<c;++a){var e="h"===this.styleTabId?b[a].endsWith(":after")||b[a].endsWith(":before"):!0;!1===e&&-1===
b[a].indexOf(":hover")&&(b[a]+=":hover");g+=this.prefix+b[a];!1===e&&(g+=","+this.prefix+b[a].replace(":hover",".tb_visual_hover"));a!==c-1&&(g+=",")}if(!0===this.isChanged)if("h"===this.styleTabId){e=g.split(",");for(var m=e.length-1;-1<m;--m)if(-1===e[m].indexOf("tb_visual_hover")){b=r.querySelectorAll(e[m].split(":hover")[0]);for(var l=b.length-1;-1<l;--l)b[l].classList.add("tb_visual_hover")}}else for(this.$liveStyledElmt[0].classList.remove("tb_visual_hover"),b=this.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover"),
e=b.length-1;-1<e;--e)b[e].classList.remove("tb_visual_hover");g=g.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">").replace(/,\s/g,",");b=p.hash(g);e=c;m=a;l=void 0!==this.rulesCache[f.activeBreakPoint][b]?this.rulesCache[f.activeBreakPoint][b]:this.findIndex(d,g);!1===c&&(c="");a=this.renameProp(a);!1!==l&&d[l]?(void 0===this.tempData[f.activeBreakPoint][l]&&(this.tempData[f.activeBreakPoint][l]={}),void 0===this.tempData[f.activeBreakPoint][l][a]&&(this.tempData[f.activeBreakPoint][l][a]=d[l].style[a]),
d[l].style[a]=c):(l=d.length,this.currentSheet.insertRule(g+"{"+m+":"+c+";}",l),void 0===this.tempData[f.activeBreakPoint][l]&&(this.tempData[f.activeBreakPoint][l]={}),this.tempData[f.activeBreakPoint][l][a]="");this.rulesCache[f.activeBreakPoint][b]=l;void 0===this.undoData[f.activeBreakPoint][l]&&(this.undoData[f.activeBreakPoint][l]={});this.undoData[f.activeBreakPoint][l][a]={a:c,b:this.tempData[f.activeBreakPoint][l][a]};p.body.triggerHandler("tb_"+this.type+"_styling",[this.group,a,c,e,this.$liveStyledElmt]);
"desktop"===f.activeBreakPoint||0!==a.indexOf("padding")&&0!==a.indexOf("margin")&&"height"!==a&&"width"!==a||f.Utils.calculateHeight()};e.prototype.initModChange=function(a){if(!0===a)p.body.off("themify_builder_change_mode.tb_visual_mode");else{var c=this;p.body.on("themify_builder_change_mode.tb_visual_mode",function(a,d,e){c.setMode(e,null!==f.GS.activeGS)})}};e.prototype.setMode=function(a,c){void 0===this.tempData[a]&&(this.tempData[a]={});void 0===this.rulesCache[a]&&(this.rulesCache[a]={});
void 0===this.undoData[a]&&(this.undoData[a]={});this.currentSheet=this.getSheet(a,c)};e.prototype.revertRules=function(a){for(let b in this.tempData){var c=this.getSheet(b,a);c=c.cssRules?c.cssRules:c.rules;for(let a in this.tempData[b])if(c[a])for(let d in this.tempData[b][a])c[a].style[d]=this.tempData[b][a][d]}this.undoData={};this.tempData={}};e.prototype.getSheet=function(a,c){return ThemifyStyles.getSheet(a,c)};e.prototype.reset=function(){this.rulesCache={};this.tempData={};this.undoData=
{};var a=ThemifyConstructor.breakpointsReverse;for(let b=a.length-1;-1<b;--b){let d=this.getSheet(a[b]);var c=d.cssRules;for(c=c.length-1;-1<c;--c)d.deleteRule(c);d=this.getSheet(a[b],!0);c=d.cssRules;for(c=c.length-1;-1<c;--c)d.deleteRule(c)}};e.prototype.clear=function(){var a=this.$liveStyledElmt[0];void 0!==a&&a.classList.remove("animated","hover-wow","tb_visual_hover");this.module_rules={};this.styleTab=this.styleTabId=this.currentField=this.isChanged=null;if(!f.saving&&f.hasChanged)this.revertRules(null!==
f.GS.activeGS),this.type&&"module"!==this.type&&null===f.GS.activeGS&&(a=f.activeModel.get("styling"))&&"slider"===a.background_type&&a.background_slider&&this.bindBackgroundSlider();else{a=a.getElementsByClassName("tb_visual_hover");for(let c=a.length-1;-1<c;--c)a[c].classList.remove("tb_visual_hover")}this.bindAnimation(!0);this.bindTabsSwitch(!0);this.initModChange(!0);this.undoData={};this.tempData={};this.$liveStyledElmt=this.currentStyleObj=this.currentSheet=null};e.prototype.addOrRemoveFrame=
function(a,c){if("module"!==this.type){var b=this,g=this.$liveStyledElmt,e="string"===typeof a;a=e?a:a.closest(".tb_tab").id.split("_").pop();var k=g.children(".tb_row_frame_"+a);if(void 0===c){c={};for(var m=this.getValue(a+"-frame_type").selector,l="custom location width height width_unit height_unit repeat type layout color".split(" "),q=0,t=l.length;q<t;++q){var n=x.document.getElementById(a+"-frame_"+l[q]);if("type"===l[q])n=n.querySelector("input:checked").value;else if("layout"===l[q])n=n.getElementsByClassName("selected")[0].id;
else if("color"===l[q]){if(n=f.Utils.getColor(n),""===n)continue}else n=n.value;c[l[q]]=n}}if(c.type===a+"-presets"||c.type===a+"-custom"){if(c.type===a+"-presets"&&(!c.layout||"none"===c.layout)||c.type===a+"-custom"&&!c.custom){"desktop"===f.activeBreakPoint?e||this.setLiveStyle("background-image","",m):"none"===c.layout&&this.setLiveStyle("background-image","none",m);return}0===k.length?(k=r.createElement("div"),k.className="tf_abs tb_row_frame tb_row_frame_"+a,void 0!==c.location&&(k.className+=
" "+c.location),g.children(".tb_action_wrap").after(k)):(k.removeClass("behind_content in_front"),void 0!==c.location&&k.addClass(c.location))}if(!e){if(c.type===a+"-presets"){g="left"===a||"right"===a?c.layout+"-l":c.layout;var u=p.hash(g),F=function(a){c.color&&(a=a.replace(/#D3D3D3/ig,c.color));b.setLiveStyle("background-image",'url("data:image/svg+xml;utf8,'+encodeURIComponent(a)+'")',m)};void 0!==ThemifyStyles.fields.frameCache[u]?F(ThemifyStyles.fields.frameCache[u]):(e=r.getElementById("tmpl-frame_"+
g),null!==e?(ThemifyStyles.fields.frameCache[u]=e.textContent.trim(),e=null,F(ThemifyStyles.fields.frameCache[u])):d.ajax({dataType:"text",url:tbLocalScript.builder_url+"/img/row-frame/"+g+".svg",success(a){ThemifyStyles.fields.frameCache[u]=a;F(a)}}))}else b.setLiveStyle("background-image",'url("'+c.custom+'")',m);b.setLiveStyle("width",c.width?c.width+c.width_unit:"",m);b.setLiveStyle("height",c.height?c.height+c.height_unit:"",m);c.repeat?"left"===a||"right"===a?b.setLiveStyle("background-size",
"100% "+100/c.repeat+"%",m):b.setLiveStyle("background-size",100/c.repeat+"% 100%",m):b.setLiveStyle("background-size","",m)}}};e.prototype.overlayType=function(a){if("module"!==this.type){var c="color"===a||"hover_color"===a,b=c?"minicolors-input":"themify-gradient-type";a=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0].getElementsByClassName(b)[0];c?((c=a.value)&&(c=f.Utils.getColor(a)),p.triggerEvent(a,"themify_builder_color_picker_change",{val:c})):p.triggerEvent(a,"change")}};
e.prototype.addOrRemoveComponentOverlay=function(a,c,b){if("module"!==this.type){var d=this.getComponentBgOverlay(),e=this.getValue(c),f=e.selector;d=0!==d.length;"h"===this.styleTabId?this.$liveStyledElmt[0].classList.add("tb_visual_hover"):this.$liveStyledElmt[0].classList.remove("tb_visual_hover");""===b&&c?(this.setLiveStyle("backgroundImage","",f),this.setLiveStyle("backgroundColor","",f)):(d||(d=r.createElement("div"),d.className="tf_abs builder_row_cover",this.$liveStyledElmt.children(".tb_action_wrap").before(d)),
e&&("color"===a?this.setLiveStyle("backgroundImage","none",f):this.setLiveStyle("backgroundColor",!1,f),this.setLiveStyle(e.prop,b,f)))}};e.prototype.bindMultiFields=function(a,c){function b(a,b){if(!1===l&&!1===m){if("row"===d.type&&void 0===tbLocalScript.fullwidth_support&&(q&&("padding"===b||"margin"===b)||"padding-left"===b||"padding-right"===b||"margin-left"===b||"margin-right"===b)){var c=b.split("-"),e=f.activeBreakPoint+"-"+c[0];if(q)a=a+","+a;else{var g=d.$liveStyledElmt.data(e);g=g?g.split(","):
[];"left"===c[1]?g[0]=a:g[1]=a;a=g.join(",")}d.$liveStyledElmt.attr("data-"+e,a).data(e,a);ThemifyBuilderModuleJs.setupFullwidthRows(d.$liveStyledElmt)}(q&&"padding"===b||0===b.indexOf("padding"))&&setTimeout(function(){p.trigger("tfsmartresize")},600)}}var d=this;if(c=d.getValue(a.id)){var e=a.closest(".tb_seperate_items"),k=c.prop.split("-"),m=void 0!==k[3],l=!1===m&&"border"===k[0],q=e.hasAttribute("data-checked");e=e.getElementsByClassName("tb_multi_field");var t=function(a){if(!0===l){var b=
a.closest("li");a=parseFloat(b.getElementsByClassName("border_width")[0].value.trim());var c=b.getElementsByClassName("border_style")[0].value;b=f.Utils.getColor(b.getElementsByClassName("minicolors-input")[0]);c="none"===c?c:isNaN(a)||""===a||""===b?"":a+"px "+c+" "+b}else c=a.value.trim(),""!==c&&(c=parseFloat(c),c=isNaN(c)?"":c+a.closest(".tb_input").querySelector("#"+a.id+"_unit").value);return c};a=!0===q?t(a):null;k=k[0];for(var n=e.length-1;-1<n;--n)!1===q&&(a=t(e[n])),k=d.getValue(e[n].id).prop,
d.setLiveStyle(k,a,c.selector),b(a,k);!1===l&&(f.ActionBar.hoverCid=null);e=null}};e.prototype.bindRowWidthHeight=function(a,c,b){b||(b=this.$liveStyledElmt);"row_height"===a?"fullheight"===c?b[0].classList.add(c):b[0].classList.remove("fullheight"):"fullwidth"===c?(b.removeClass("fullwidth").addClass("fullwidth_row_container"),ThemifyBuilderModuleJs.setupFullwidthRows(b)):"fullwidth-content"===c?(b.removeClass("fullwidth_row_container").addClass("fullwidth"),ThemifyBuilderModuleJs.setupFullwidthRows(b)):
b.removeClass("fullwidth fullwidth_row_container").css({"margin-left":"","margin-right":"","padding-left":"","padding-right":"",width:""});p.trigger("tfsmartresize")};e.prototype.bindAnimation=function(a){var c=this;if(!0===a)this.$context.off("change.tb_animation");else this.$context.on("change.tb_animation","#animation_effect,#animation_effect_delay,#animation_effect_repeat,#hover_animation_effect",function(){var a="hover_animation_effect"===this.id,e=a?"hover_animation_effect":"animation_effect",
f=a?d(this).val():c.$context.find("#animation_effect").val(),k=void 0!==c.currentStyleObj[e]?c.currentStyleObj[e]:ThemifyConstructor.values[e],m=c.$liveStyledElmt;k&&(a&&(k=k+" hover-wow hover-animation-"+k),m.removeClass(k+" wow").css({"animation-name":"","animation-delay":"","animation-iteration-count":""}));m.removeClass("animated tb_hover_animate");if(c.currentStyleObj[e]=f)a?f="hover-wow hover-animation-"+f:(e=parseFloat(c.$context.find("#animation_effect_delay").val()),k=parseInt(c.$context.find("#animation_effect_repeat").val()),
m.css({"animation-delay":0<e&&!isNaN(e)?e+"s":"","animation-iteration-count":0<k&&!isNaN(k)?k:""})),setTimeout(function(){m.addClass(f+" animated");a&&m.trigger("mouseover")},1)})};e.prototype.getRowAnchorClass=function(a){return 0<a.length?"tb_has_section tb_section-"+a:""};e.prototype.getStylingVal=function(a){return void 0!==this.currentStyleObj[a]?this.currentStyleObj[a]:""};e.prototype.setStylingVal=function(a,c){this.currentStyleObj[a]=c};e.prototype.bindBackgroundMode=function(a,c){var b={repeat:"repeat",
"repeat-x":"repeat-x","repeat-y":"repeat-y","repeat-none":"no-repeat","no-repeat":"no-repeat",fullcover:"cover","best-fit-image":"contain","builder-parallax-scrolling":"cover","builder-zoom-scrolling":"100%","builder-zooming":"100%"};if(void 0!==b[a]){var d={};c=this.getValue(c);var e=x.document.getElementById(c.origId);null!==e&&""===e.value.trim()?(a=null,d={"background-repeat":"","background-size":"","background-position":"","background-attachment":""}):-1!==a.indexOf("repeat")?(d["background-repeat"]=
b[a],d["background-size"]="auto"):(d["background-size"]=b[a],d["background-repeat"]="no-repeat","best-fit-image"===b[a]||"builder-zooming"===b[a]?d["background-position"]="center center":"builder-zoom-scrolling"===b[a]&&(d["background-position"]="50%"));this.$liveStyledElmt[0].classList.remove("builder-parallax-scrolling");this.$liveStyledElmt[0].classList.remove("builder-zooming");this.$liveStyledElmt[0].classList.remove("builder-zoom-scrolling");this.$liveStyledElmt[0].style.backgroundSize=this.$liveStyledElmt[0].style.backgroundPosition=
"";if("module"!==this.type||"builder-parallax-scrolling"!==a&&"builder-zooming"!==a&&"builder-zoom-scrolling"!==a&&"best-fit-image"!==a){"builder-parallax-scrolling"===a?this.$liveStyledElmt[0].classList.add("builder-parallax-scrolling"):"builder-zooming"===a?this.$liveStyledElmt[0].classList.add("builder-zooming"):"builder-zoom-scrolling"===a&&this.$liveStyledElmt[0].classList.add("builder-zoom-scrolling");for(var f in d)this.setLiveStyle(f,d[f],c.selector);"builder-zoom-scrolling"===a?ThemifyBuilderModuleJs.backgroundZoom(this.$liveStyledElmt):
"builder-zooming"===a?ThemifyBuilderModuleJs.backgroundZooming(this.$liveStyledElmt):"builder-parallax-scrolling"===a&&ThemifyBuilderModuleJs.backgroundScrolling(this.$liveStyledElmt)}}};e.prototype.bindBackgroundPosition=function(a,c){a&&0<a.length&&(c=this.getValue(c))&&(a=a.split(","),this.setLiveStyle(c.prop,a[0]+"% "+a[1]+"%",c.selector))};e.prototype.bindBackgroundSlider=function(a){function c(a){a=d(a);var c=b.getComponentBgOverlay();0<c.length?c.after(a):b.$liveStyledElmt.prepend(a);ThemifyBuilderModuleJs.backgroundSlider(a[0].parentNode)}
if("module"!==this.type){var b=this;a=b.$context.find("#"+a.id).val().trim();b.removeBgSlider();if(a){void 0===this.cahce&&(this.cahce={});a={shortcode:encodeURIComponent(a),mode:b.$context.find("#background_slider_mode").val(),speed:b.$context.find("#background_slider_speed").val(),size:b.$context.find("#background_slider_size").val()};var e="",f;for(f in a)e+=p.hash(f+a[f]);void 0!==this.cahce[e]?c(this.cahce[e]):(a.type=b.type,d.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:"tb_slider_live_styling",
tb_background_slider_data:a},function(a){10>a.length||(b.cahce[e]=a,c(a))}))}}};e.prototype.VideoOptions=function(a,c){if("module"!==this.type){var b=this.$liveStyledElmt.find(".big-video-wrap").first();a=!0===a.checked;var d="";void 0!==b[0]&&(b[0].classList.contains("themify_ytb_wrapper")?(b=this.$liveStyledElmt,d="ytb"):b[0].classList.contains("themify-video-vmieo")?(b=$f(b.children("iframe")[0]))&&(d="vimeo"):(b=this.$liveStyledElmt.data("plugin_ThemifyBgVideo"),d="local"),"mute"===c?a?("ytb"===
d?b.ThemifyYTBMute():"vimeo"===d?b.api("setVolume",0):"local"===d&&b.muted(!0),this.$liveStyledElmt.data("mutevideo","mute")):("ytb"===d?b.ThemifyYTBUnmute():"vimeo"===d?b.api("setVolume",1):"local"===d&&b.muted(!1),this.$liveStyledElmt.data("mutevideo","")):"unloop"===c&&(a?("vimeo"===d?b.api("setLoop",0):"local"===d&&b.loop(!1),this.$liveStyledElmt.data("unloopvideo","")):("vimeo"===d?b.api("setLoop",1):"local"===d&&b.loop(!0),this.$liveStyledElmt.data("unloopvideo","loop"))))}};e.prototype.bindBackgroundTypeRadio=
function(a){var c="tb_uploader_input";"module"!==this.type&&("slider"!==a?"n"===this.styleTabId&&this.removeBgSlider():c="tb_shortcode_input","video"!==a&&"n"===this.styleTabId&&this.removeBgVideo());"gradient"!==a?this.setLiveStyle("backgroundImage","none"):c="themify-gradient-type";var b=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0];p.triggerEvent(b.getElementsByClassName(c)[0],"change");"image"===a&&"module"===this.type&&(c=b.getElementsByClassName("minicolors-input")[0],void 0!==
c&&p.triggerEvent(c,"themify_builder_color_picker_change",{val:c.value}))};e.prototype.bindFontColorType=function(a,c,b){if("radio"===b)if(c=-1!==a.indexOf("_solid"),b=!0===c?a.replace(/_solid$/ig,""):a.replace(/_gradient$/ig,"-gradient-type"),b=x.document.getElementById(b),!0===c){a=f.Utils.getColor(b);if(void 0===a||""===a)a="";p.triggerEvent(b,"themify_builder_color_picker_change",{val:a})}else p.triggerEvent(b,"change");else c=this.getValue(c).selector,"color"===b?void 0===a||""===a?(a="",this.setLiveStyle("WebkitBackgroundClip",
"",c),this.setLiveStyle("backgroundClip","",c),this.setLiveStyle("backgroundImage","",c)):(this.setLiveStyle("WebkitBackgroundClip","border-box",c),this.setLiveStyle("backgroundClip","border-box",c),this.setLiveStyle("backgroundImage","none",c)):""!==a&&(b="backgroundImage",this.setLiveStyle("color","transparent",c),this.setLiveStyle("WebkitBackgroundClip","text",c),this.setLiveStyle("backgroundClip","text",c)),""===a&&"color"!==b||this.setLiveStyle(b,a,c)};e.prototype.shadow=function(a,c,b){if(c=
this.getValue(c)){a=a.closest(".tb_seperate_items").getElementsByClassName("tb_shadow_field");b="";for(var d=!0,e="",k=0,m=a.length;k<m;++k)if(a[k].classList.contains("tb-checkbox"))b=a[k].checked?"inset ":"";else{var l=a[k].value.trim();"color"===ThemifyConstructor.styles[a[k].id].type?l=f.Utils.getColor(a[k]):""===l?l=0:(d=!1,l+=a[k].closest(".tb_input").querySelector("#"+a[k].id+"_unit").value);e+=l+" "}this.setLiveStyle(c.prop,!0===d?"":b+e,c.selector)}};e.prototype.filters=function(a,c){a=a.closest(".tb_filters_fields").getElementsByClassName("tb_filters_field");
for(var b="",d,e=0,f=a.length;e<f;++e){var m=a[e].value.trim();""!==m&&(d=this.getValue(a[e].id),m+=a[e].closest(".tb_seperate_items").querySelector("#"+a[e].id+"_unit").textContent,m="hue"===d.prop?"hue-rotate("+m+")":d.prop+"("+m+")",b+=m+" ")}d=this.getValue(c);this.setLiveStyle("filter",b,d.selector)};e.prototype.setData=function(a,c,b){if(a=this.getValue(a))""===c&&(c=a.prop),this.setLiveStyle(c,b,a.selector)};e.prototype.bindEvents=function(a,c){if(!a.classList.contains("style_apply_all")){var b=
this;(function(){var e=c.type,h=c.prop,k=c.id;var m="color"===e?"themify_builder_color_picker_change":"gradient"===e?"themify_builder_gradient_change":"text"===e||"range"===e?"keyup":"change";a.addEventListener(m,function(a){var g=this.classList,l="SELECT"===this.tagName,n=!l&&"radio"===this.type;if(b.currentField!==this.id||""===b.currentField){b.currentField="radio"===this.type?!1:this.id;b.isChanged=!0;b.styleTab=null;b.styleTabId="n";var u=this.closest(".tb_tab");null===u?(u=this.closest(".tb_expanded_opttions"),
null===u&&(u=x.document.getElementById("tb_options_styling"))):b.styleTabId=u.id.split("_").pop();b.styleTab=u}else b.isChanged=!1;f.hasChanged=!0;a=a.detail&&a.detail.val?a.detail.val:"frame"===e?this.id:this.value;a=void 0!==a&&"undefined"!==a?a.trim():"";if("color"===e&&g.contains("border_color")||!0===l&&g.contains("border_style")||"keyup"===m&&(g.contains("border_width")||g.contains("tb_multi_field")))b.bindMultiFields(this);else if("frame-custom"===h||"frame"===e||g.contains("tb_frame"))"module"!==
b.type&&b.addOrRemoveFrame(this);else if(g.contains("tb_shadow_field"))b.shadow(this,k);else if(g.contains("tb_filters_field"))b.filters(this,k);else if("keyup"===m)""!==a&&("column-rule-width"===h?(a+="px",g=k.replace("_width","_style"),l=x.document.getElementById(g),null!==l&&b.setData(g,"",l.value)):"column-gap"===h?a+="px":(g=x.document.getElementById(k+"_unit"),null!==g&&(a+=g.value?g.value:"px"))),b.setData(k,"",a);else if(!0===c.isFontColor)b.bindFontColorType(a,k,e);else{if(!0===l)if("font-weight"===
h)g=this.getAttribute("data-selected"),null!==g&&""!==g&&"default"!==g&&void 0===ThemifyConstructor.font_select.safe[g]&&ThemifyConstructor.font_select.loadGoogleFonts(g+":"+a),l=b.styleTab.getElementsByClassName("tb_multi_fonts")[0],-1!==a.indexOf("italic")?(a=parseInt(a.replace("italic","")),g=l.querySelector('[value="italic"]')):g=l.querySelector('[value="normal"]'),!1===g.checked&&g.parentNode.click();else if("font_select"===e)""!==a&&"default"!==a&&void 0===ThemifyConstructor.font_select.safe[a]?
(g=this.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],l=a,void 0!==g?l+=":"+g.value:b.setLiveStyle("font-weight","",c.selector),ThemifyConstructor.font_select.loadGoogleFonts(l)):"default"===a&&(a=""),""!==a&&(a=ThemifyStyles.parseFontName(a));else{if(g.contains("tb_unit")){p.triggerEvent(b.$context.find("#"+k.replace("_unit",""))[0],"keyup");return}if("background-mode"===h){b.bindBackgroundMode(a,k);return}if("column-count"===h&&0==a)a="";else if(g.contains("tb_position_field"))for(n=
["top","right","bottom","left"],l=this.closest(".tb_input"),g=n.length-1;-1<g;--g)"absolute"===a||"fixed"===a?(u="#"+(c.id+"_"+n[g]),u=!0!==l.querySelector(u+"_auto input").checked?l.querySelector(u).value.trim()+l.querySelector(u+"_unit").value.trim():"auto"):u="",b.setLiveStyle(n[g],u,c.selector);else if("display"===h){if("none"===a)return!1;"inline-block"===a?b.setLiveStyle("width","auto",c.selector):b.setLiveStyle("width","100%",c.selector)}else"vertical-align"===h&&""!==a&&b.setLiveStyle("align-self",
"top"===a?"flex-start":"middle"===a?"center":"flex-end",c.selector)}else{if("gallery"===e&&"module"!==b.type){b.bindBackgroundSlider(c);return}if(!0===n){k=this.closest(".tb_lb_option").id;!1===this.checked&&(a="");if("imageGradient"===e||!0===c.is_background){b.bindBackgroundTypeRadio(a);return}if(!0===c.is_overlay){"module"!==b.type&&b.overlayType(a);return}}else if("color"===e||"gradient"===e){"gradient"===e&&(k=this.dataset.id);if(!0===c.is_overlay){"module"!==b.type&&b.addOrRemoveComponentOverlay(e,
k,a);return}"color"===e&&(g=null,"module"===b.type&&void 0!==c.colorId&&void 0!==c.origId?(g=x.document.getElementById(c.origId),null!==g&&"image"!==g.closest(".tb_input").querySelector("input:checked").value&&(g=null)):"module"!==b.type&&"h"===b.styleTabId&&(g=b.styleTab.getElementsByClassName("tb_uploader_input")[0]),g&&""===g.value.trim()&&b.setLiveStyle("background-image",""!==a?"none":"",c.selector))}else if("image"===e||"video"===e){if("video"===e)return 0<a.length?"module"!==b.type&&(b.$liveStyledElmt.data("fullwidthvideo",
a).attr("data-fullwidthvideo",a),_.isEmpty(b.$liveStyledElmt.data("mutevideo"))&&b.$context.find("#background_video_options_mute").is(":checked")&&b.$liveStyledElmt.data("mutevideo","mute"),ThemifyBuilderModuleJs.fullwidthVideo(b.$liveStyledElmt)):b.removeBgVideo(),!1;a?a="url("+a+")":(a="",void 0!==c.colorId&&"h"===b.styleTabId&&(g=x.document.getElementById(c.colorId),null!==g&&""!==g.value.trim()&&(a="none")));l=b.styleTab.getElementsByClassName("tb_image_options");for(g=l.length-1;-1<g;--g)for(n=
l[g].getElementsByClassName("tb_lb_option"),u=n.length-1;-1<u;--u)p.triggerEvent(n[u],"change")}else{if("background-position"===h){b.bindBackgroundPosition(a,k);return}if("checkbox"===e){if(null!==this.closest("#background_video_options")){b.VideoOptions(this,a);return}if("height"===h&&-1!==k.indexOf("_auto_height")||"width"===h&&-1!==k.indexOf("_auto_width")){a="height"===h?c.heightID:c.widthID;this.checked?b.setData(a,h,"auto"):(g=b.styleTab.querySelector("#"+a).value.trim(),""!==g?b.setData(a,
h,g+d(b.styleTab).find("#"+a+"_unit").val()):b.setData(a,h,""));return}if(!0===c.is_position){g="#"+c.posId;l=this.closest(".tb_input");this.checked?a="auto":(a=l.querySelector(g).value.trim(),a=""===a||isNaN(a)?"":a+l.querySelector(g+"_unit").value);b.setLiveStyle(c.prop,a,c.selector);return}}}}b.setData(k,"",a)}},{passive:!0})})()}};e.prototype.getValue=function(a){return void 0!==this.module_rules[a]?this.module_rules[a]:!1};e.prototype.bindTabsSwitch=function(a){var c=this;if(!0===a)p.body.off("themify_builder_tabsactive.hoverTabs");
else p.body.on("themify_builder_tabsactive.hoverTabs",function(a,d,e){if("styling"===ThemifyConstructor.clicked)if("h"!==d.split("_").pop()){c.$liveStyledElmt[0].classList.remove("tb_visual_hover");var b=c.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover");for(a=b.length-1;-1<a;--a)b[a].classList.remove("tb_visual_hover")}else"module"!==c.type&&(a=e.previousElementSibling.getElementsByClassName("background_type")[0],void 0!==a&&(a=a.querySelector("input:checked").value,"image"===a||"gradient"===
a?e.classList.remove("tb_disable_hover"):e.classList.add("tb_disable_hover"))),setTimeout(function(){b=e.getElementsByClassName("tb_lb_option");for(var a=[],d=b.length-1;-1<d;--d){var f=b[d].id,g=b[d].classList.contains("themify-gradient");!0===g&&(f=b[d].dataset.id);if(void 0!==c.module_rules[f]&&(g||null!==b[d].offsetParent))for(void 0!==c.module_rules[f].is_overlay&&c.$liveStyledElmt[0].classList.add("tb_visual_hover"),f=Array.isArray(c.module_rules[f].selector)?c.module_rules[f].selector:[c.module_rules[f].selector],
g=f.length-1;-1<g;--g){var h=f[g].split(":hover")[0];a[h]=1}}b=null;a=Object.keys(a);if(0<a.length)for(d=a.length-1;-1<d;--d)for(b=r.querySelectorAll(c.prefix+a[d]),g=b.length-1;-1<g;--g)b[g].classList.add("tb_visual_hover")},10)})};e.prototype.getComponentBgOverlay=function(){return this.$liveStyledElmt.children(".builder_row_cover")};e.prototype.getComponentBgSlider=function(){var a="colum"===this.type&&"sub-column"===f.activeModel.get("component_name")?"sub-col":"colum"===this.type?"col":this.type;
return this.$liveStyledElmt.children("."+a+"-slider")};e.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children(".tb_backstretch")).remove();this.$liveStyledElmt.css({position:"",background:"","z-index":""})};e.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr("data-fullwidthvideo").data("fullwidthvideo","").children(".big-video-wrap").remove()};return e}(jQuery);f.EdgeDrag={modules:null,oneTag:["AREA","EMBED","IMG","INPUT"],disableDrag:null,
liveinstance:null,_onDrag:null,init(){null===this._onDrag&&(this._onDrag=f.EdgeDrag.drag.bind(this));localStorage.getItem("tb_disable_padding_dragging")?(p.body[0].classList.add("tb_disable_padding_dragging"),f.Instances.Builder[f.builderIndex].el.removeEventListener("mousedown",this._onDrag),f.toolbar.el.getElementsByClassName("tb_padding_dragging_mode")[0].checked=!1):(f.Instances.Builder[f.builderIndex].el.addEventListener("mousedown",this._onDrag),p.body[0].classList.remove("tb_disable_padding_dragging"))},
addEdgesOptions(d){var e=d.closest(".tb_dragger");if(void 0===e.getElementsByClassName("tb_dragger_lightbox")[0]){d=e.classList.contains("tb_dragger_margin")?"margin":"padding";var a=["px","em","%"],c=["opposite","all"],b=e.parentNode.children,g=D(e).closest("[data-cid]")[0].getAttribute("data-cid"),h=null,k=null,m=null,l=this;g=f.Models.Registry.lookup(g);var q=g.get("elType"),t="module"===q?g.get("mod_settings"):g.get("styling");q="margin"===d&&("column"===q||"row"===q);e=null;for(e=b.length-1;-1<
e;--e)if(b[e].classList.contains("tb_dragger_"+d)){var n=r.createElement("div"),u=r.createElement("ul"),F=r.createElement("ul"),v=b[e].getElementsByClassName("tb_dragger_options")[0],I=b[e].getAttribute("data-id"),y=b[e].classList.contains("tb_dragger_top")||b[e].classList.contains("tb_dragger_bottom")?"s":"e",C=b[e].getAttribute("data-u");n.className="tb_dragger_lightbox";F.className="tb_dragger_units";u.className="tb_dragger_types";!0===q&&(u.className+=" tb_dragger_hide_apply_all");for(var E=0,
J=a.length;E<J;++E){var w=r.createElement("li");w.textContent=a[E];a[E]===C&&(w.className="current");F.appendChild(w)}null===h&&(h=I.replace(/_left|_right|_bottom|_top$/ig,""),k=this.getCurrentStyling(t,"checkbox_"+h+"_apply_all",g));null===m&&b[e].getAttribute("data-v")&&(m=1);E=0;for(J=c.length;E<J;++E)w=r.createElement("li"),I=r.createElement("span"),C=!1,w.className="opposite"===c[E]?"tb_apply_opposite":"tb_apply_all",w.className+=" tb_apply","opposite"===c[E]?k||(C=this.getCurrentStyling(t,"s"===
y?h+"_opp_top":h+"_opp_left",g)):C=k,C&&(w.className+=" current"),w.appendChild(I),u.appendChild(w);n.appendChild(F);n.appendChild(u);v.appendChild(n);v.getElementsByClassName("tb_dragger_arrow")[0].addEventListener("click",function(a){a.preventDefault();a.stopPropagation();!0!==f.ActionBar.isHoverMode?f.ActionBar.el.classList.remove("tb_show_toolbar"):(a=p.body[0].getElementsByClassName("tb_clicked"),a.length&&(a[0].style.display="none"));var b=this.closest(".tb_dragger");b.classList.add("tb_dragger_focus");
r.body.classList.add("tb_dragger_options_open");var c=function(a){if(!0!==f.ActionBar.isHoverMode)f.ActionBar.el.classList.add("tb_show_toolbar");else{var d=p.body[0].getElementsByClassName("tb_clicked");d.length&&(d[0].style.display="block")}if("mouseout"===a.type||!a.target.classList.contains("tb_dragger_lightbox")&&!a.target.parentNode.classList.contains("tb_dragger_lightbox"))a.stopPropagation(),a.preventDefault(),r.removeEventListener("click",c),x.document.removeEventListener("click",c),b.removeEventListener("mouseleave",
c,{once:!0}),b.classList.contains("tb_dragger_padding")&&b.classList.contains("tb_dragger_top")&&l.setModulePosition(b),b.classList.remove("tb_dragger_focus"),r.body.classList.remove("tb_dragger_options_open"),b=null};b.addEventListener("mouseleave",c,{once:!0});r.addEventListener("click",c);x.document.addEventListener("click",c)})}if(null===m&&k){for(e=b.length-1;-1<e;--e)b[e].classList.contains("tb_dragger_"+d)&&b[e].getElementsByClassName("tb_apply_all")[0].classList.remove("current");this.setData(g,
"checkbox_"+h+"_apply_all",!1)}}},clearEdges(){for(var d=f.Instances.Builder[0].el.getElementsByClassName("tb_dragger"),e=d.length-1;-1<e;--e)d[e].parentNode.removeChild(d[e])},addGutters(d,e){},getTabId(d,e,a){for(var c in d)if(void 0!==d[c].options)for(var b=d[c].options.length-1;-1<b;--b)if(d[c].options[b].label===a&&"expand"===d[c].options[b].type){var f=d[c].options[b].options;if(void 0!==f)for(var h=f.length-1;-1<h;--h)if(void 0!==f[h].options&&void 0!==f[h].options.n)for(var k=f[h].options.n.options,
m=k.length-1;-1<m;--m)if(k[m].id===e)return c}return null},addEdges(d,e,a,c,b){!0!==b&&this.clearEdges();if("divider"!==d){b="row"===d||"column"===d||"subrow"===d?e.get("styling"):e.get("mod_settings");for(var g=["padding","margin"],h=["top","left","bottom","right"],k=h.length,m=this.oneTag.length,l={},q=g.length-1;-1<q;--q)if(void 0!==this.modules[d]&&void 0!==this.modules[d][g[q]])for(var t in this.modules[d][g[q]])l[t]={s:this.modules[d][g[q]][t],t:g[q]};else l[g[q]]={s:"",t:g[q]};for(var n in l){g=
r.createDocumentFragment();t=l[n].t;q=n.replace("_"+h[q],"");var u=this.getCurrentStyling(b,"checkbox_"+q+"_apply_all",e);if(u){var p=this.getCurrentStyling(b,q+"_top",e);var v=this.getCurrentStyling(b,q+"_top_unit",e)||"px";if(void 0===p||null===p)p=""}else u=!1;for(q=k-1;-1<q;--q)if("margin"!==t||"column"!==d&&"row"!==d||"right"!==h[q]&&"left"!==h[q]){var x=r.createElement("div"),y=r.createElement("div"),C=r.createElement("span"),E=r.createElement("span"),D=t+"-"+h[q],w="margin"!==t||"column"!==
d&&"row"!==d?n+"_"+h[q]:D;!1===u&&(p=this.getCurrentStyling(b,w,e),v=this.getCurrentStyling(b,w+"_unit",e)||"px",void 0===p||null===p)&&(p="");C.className="tb_dragger_value";E.className="tb_dragger_arrow";y.className="tb_dragger_options";x.setAttribute("data-v",p);x.setAttribute("data-u",v);x.setAttribute("data-id",w);x.setAttribute("data-prop",D);""!==p&&(C.textContent=p+v);x.className="tb_dragger tb_disable_sorting tb_dragger_"+h[q]+" tb_dragger_"+t;"%"!==v&&this.setValueByType(x);y.appendChild(C);
y.appendChild(E);x.appendChild(y);g.appendChild(x)}u=""===l[n].s?[a]:a.querySelectorAll(l[n].s);for(q=u.length-1;-1<q;--q){y=u[q].tagName;x=null;C=u[q];if("DIV"===y||"SPAN"===y||"A"===y)C.classList.add("tb_has_edge"),C.appendChild(g);else{E=null;for(t=m-1;-1<t;--t)if(this.oneTag[t]===y){C=u[q].parentNode;C.classList.add("tb_has_edge");C.appendChild(g);E=!0;x=u[q].offsetWidth;break}null===E&&(C.classList.add("tb_has_edge"),C.appendChild(g))}y=C.children;for(t=y.length-1;-1<t;--t)"%"===y[t].getAttribute("data-u")&&
this.setValueByType(y[t]),null!==x&&(y[t].classList.contains("tb_dragger_top")||y[t].classList.contains("tb_dragger_bottom"))&&(y[t].style.width=x+"px")}}!0===f.ActionBar.isHoverMode&&"row"!==d&&(e=null,"column"===d?"module"!==c&&(e=a.classList.contains("sub_column")?a.closest(".module_subrow"):a.closest(".module_row")):e="subrow"===d||"module"===c||a.classList.contains("tb_module_front")?a.closest(".module_column"):a.closest(".tb_module_front"),null!==e&&(void 0===c&&(c="row"!==d&&"column"!==d&&
"subrow"!==d?"module":null),d=f.Models.Registry.lookup(e.getAttribute("data-cid")),a=d.get("elType"),"module"===a&&(a=d.get("mod_name")),this.addEdges(a,d,e,c,!0)))}},optionsClick(d){f.ActionBar.disable=!0;d.preventDefault();d.stopPropagation();this.addEdgesOptions(d.target.closest(".tb_dragger_options"));d="LI"===d.target.nodeName?d.target:d.target.parentNode;"LI"===d.nodeName&&(!d.classList.contains("current")&&d.parentNode.classList.contains("tb_dragger_units")?this.changeUnit(d):d.parentNode.classList.contains("tb_dragger_types")&&
this.changeApply(d));f.ActionBar.disable=null},changeUnit(d){var e=d.closest(".tb_dragger_lightbox").closest(".tb_dragger"),a=e.classList.contains("tb_dragger_padding")?"padding":"margin",c=e.classList.contains("tb_dragger_top")||e.classList.contains("tb_dragger_bottom")?"s":"e",b=e.getElementsByClassName("tb_dragger_types")[0].getElementsByClassName("current")[0];d=d.textContent;var g=e.parentNode,h=g.getAttribute("data-cid"),k=g.children;b=void 0===b?!1:b.classList.contains("tb_apply_all")?"all":
"opposite";h||(h=D(g).closest("[data-cid]")[0].getAttribute("data-cid"));g=f.Models.Registry.lookup(h);h=g.get("elType");"module"===h&&(h=g.get("mod_name"));h=this.getSelector(h,a,e.getAttribute("data-id").replace(/_left|_right|_bottom|_top$/ig,""));r.body.classList.add("tb_dragger_drag");e.classList.add("tb_dragger_dragged");for(var m=k.length-1;-1<m;--m)if(k[m].classList.contains("tb_dragger_"+a)){if("opposite"===b){if(!("s"===c&&(k[m].classList.contains("tb_dragger_top")||k[m].classList.contains("tb_dragger_bottom"))||
"e"===c&&(k[m].classList.contains("tb_dragger_left")||k[m].classList.contains("tb_dragger_right"))))continue}else if("all"!==b&&k[m]!==e)continue;var l=k[m].getAttribute("data-v"),q=""!==l?this.convert(a,k[m],k[m].getAttribute("data-u"),d,l):"";l=k[m].getElementsByClassName("tb_dragger_units")[0].children;k[m].setAttribute("data-v",q);k[m].setAttribute("data-u",d);this.setLivePreview(g,k[m].getAttribute("data-prop"),q+d,h);this.setData(g,k[m].getAttribute("data-id"),q,d,k[m].getAttribute("data-prop"));
this.setValueByType(k[m]);k[m].getElementsByClassName("tb_dragger_value")[0].textContent=""===q?"":q+d;for(q=l.length-1;-1<q;--q)l[q].textContent===d?l[q].classList.add("current"):l[q].classList.remove("current")}setTimeout(function(){for(var a=k.length-1;-1<a;--a)k[a].classList.remove("tb_dragger_dragged");r.body.classList.remove("tb_dragger_drag")},500)},changeApply(d){var e=d.classList.contains("tb_apply_all")?"all":"opposite",a=d.classList.contains("current"),c=d.closest(".tb_dragger");d=!1===
a?c.getElementsByClassName("tb_apply_all")[0].classList.contains("current"):null;var b=c.parentNode,g=b.children,h=c.getAttribute("data-id").replace(/_left|_right|_bottom|_top$/ig,""),k=c.getAttribute("data-v"),m=c.getAttribute("data-u"),l=c.classList.contains("tb_dragger_padding")?"padding":"margin";c=c.classList.contains("tb_dragger_top")||c.classList.contains("tb_dragger_bottom")?"s":"e";var q=H.clone(b),p=b.getAttribute("data-cid");p||(p=D(b).closest("[data-cid]")[0].getAttribute("data-cid"));
var n=f.Models.Registry.lookup(p);b=D.extend(!0,{},n.get("module"===n.get("elType")?"mod_settings":"styling"));"all"===e?(this.setData(n,"checkbox_"+h+"_apply_all",!1===a?"1":!1),!1===a&&(this.setData(n,h+"_opp_left",!1),this.setData(n,h+"_opp_top",!1))):(this.setData(n,"checkbox_"+h+"_apply_all",!1),this.setData(n,"s"===c?h+"_opp_top":h+"_opp_left",!1===a?"1":!1));for(h=g.length-1;-1<h;--h)if(g[h].classList.contains("tb_dragger_"+l)){n=g[h].getElementsByClassName("tb_dragger_lightbox")[0];n.parentNode.removeChild(n);
this.addEdgesOptions(g[h]);!0===a&&(m||(m="px"),null===k||void 0===k)&&(k="");if("all"===e||!0===d)g[h].setAttribute("data-v",k),g[h].setAttribute("data-u",m);if("all"!==e)if("s"===c&&(g[h].classList.contains("tb_dragger_top")||g[h].classList.contains("tb_dragger_bottom"))||"e"===c&&(g[h].classList.contains("tb_dragger_left")||g[h].classList.contains("tb_dragger_right")))g[h].setAttribute("data-v",k),g[h].setAttribute("data-u",m);else continue;n=g[h].getElementsByClassName("tb_dragger_units")[0].children;
for(var u,r=n.length-1;-1<r;--r)n[r].textContent===m?(n[r].classList.add("current"),u=n[r]):n[r].classList.remove("current");this.changeUnit(u)}this.onChange();null!==f.activeModel&&f.activeModel.cid===p||this.addUndo(q,b)},setValueByType(d){var e=d.getAttribute("data-prop"),a=d.classList.contains("tb_dragger_margin")?"margin":"padding",c=d.getAttribute("data-v"),b=d.getAttribute("data-u");"%"===b&&(c=this.getRealPercent(d,c),b="px");"padding"===a?d.style[e]=""===c?"":c+b:""===c?d.style.height=d.style.width=
d.style[e]="":(a=d.classList.contains("tb_dragger_top")||d.classList.contains("tb_dragger_bottom")?"height":"width",d.style[a]=(0<c?c:-c)+b,d.style[e]=-c+b)},getRealPercent(d,e){return parseFloat(e*d.closest(".tb_has_edge").parentNode.offsetWidth/100)},convert(d,e,a,c,b){if(0==b)return 0;if(a===c)return b;var f;e=e.closest(".tb_has_edge");d="em"===c||"em"===a?parseFloat(v.getComputedStyle(e).fontSize):null;e="%"===c||"%"===a?e.parentNode.offsetWidth:null;"px"===a?"em"===c?f=+parseFloat(b/d).toFixed(2):
"%"===c&&(f=parseInt(100*b/e)):"%"===a?(f=parseFloat(b*e/100),f="em"===c?+parseFloat(f/d).toFixed(2):parseInt(f)):(f=parseFloat(b*d),"%"===c&&(f=parseFloat(100*f/e)),f=parseInt(f));return f},getCurrentStyling(d,e,a){var c=null;if(null!==f.activeModel&&f.activeModel.cid===a.cid){var b=H.Lightbox.$lightbox[0].querySelector("#"+e);null!==b&&(b.classList.contains("themify-checkbox")?(b=b.getElementsByClassName("tb-checkbox")[0],void 0!==b&&(c=!0===b.checked?b.value:!1)):c=b.value)}if(null===c){b=f.activeModel;
var g=ThemifyConstructor.values,h=ThemifyConstructor.clicked;f.activeModel=a;ThemifyConstructor.clicked="styling";ThemifyConstructor.values=d;c=ThemifyConstructor.getStyleVal(e);f.activeModel=b;ThemifyConstructor.clicked=h;ThemifyConstructor.values=g}return c},setData(d,e,a,c,b){var g="module"===d.get("elType")?"mod_settings":"styling",h=D.extend(!0,{},d.get(g)),k={};h||(h={});if(null!==f.activeModel&&d.cid===f.activeModel.cid){var m=H.Lightbox.$lightbox[0].querySelector("#"+e);if(void 0!==b){void 0===
f.liveStylingInstance.tempData[f.activeBreakPoint]&&(f.liveStylingInstance.tempData[f.activeBreakPoint]={});b=f.liveStylingInstance.renameProp(b);var l=f.liveStylingInstance.tempData[f.activeBreakPoint],q;for(q in l)for(var r in l[q])if(r===b){f.liveStylingInstance.tempData[f.activeBreakPoint][q][r]=a+c;break}}ThemifyConstructor.values[e]=a;ThemifyConstructor.values[e+"_unit"]=c;if(null!==m){f.hasChanged=!0;m.classList.contains("themify-checkbox")?(m=m.getElementsByClassName("tb-checkbox")[0],void 0!==
m&&(m.checked=a?!0:!1,p.triggerEvent(m,"change"))):(m.value=a,m=H.Lightbox.$lightbox[0].querySelector("#"+e+"_unit"),null!==m&&(m.value=c));return}}"desktop"!==f.activeBreakPoint?(void 0===h["breakpoint_"+f.activeBreakPoint]&&(h["breakpoint_"+f.activeBreakPoint]={}),h["breakpoint_"+f.activeBreakPoint][e]=a,c&&(h["breakpoint_"+f.activeBreakPoint][e+"_unit"]=c)):(h[e]=a,c&&(h[e+"_unit"]=c));k[g]=h;d.set(k,{silent:!0})},getSelector(d,e,a){return void 0!==this.modules[d]&&void 0!==this.modules[d][e]?
this.modules[d][e][a]:void 0},setLivePreview(d,e,a,c){if(null!==f.activeModel&&d.cid===f.activeModel.cid)f.liveStylingInstance.setLiveStyle(e,a,c);else{var b=f.activeModel,g=ThemifyConstructor.component;f.activeModel=d;ThemifyConstructor.component=d.get("elType");this.liveinstance=new O;this.liveinstance.init(!0);this.liveinstance.setLiveStyle(e,a,c);f.activeModel=b;ThemifyConstructor.component=g}},onChange(){setTimeout(function(){f.Utils._onResize(!0)},1500)},addUndo(d,e){var a=!0===f.hasChanged;
f.hasChanged=!0;var c=d[0].getAttribute("data-cid"),b=f.Models.Registry.lookup(c),g=D.extend(!0,{},this.liveinstance.undoData);b=D.extend(!0,{},"module"===b.get("elType")?b.get("mod_settings"):b.get("styling"));var h=H.clone(r.getElementsByClassName("tb_element_cid_"+c)[0]);d[0].classList.remove("tb_element_clicked");h[0].classList.remove("tb_element_clicked");f.undoManager.push(c,d,h,"save",{bsettings:e,asettings:b,styles:g,column:!1});this.liveinstance=null;f.hasChanged=a},setModulePosition(d){var e=
f.ActionBar.prevExpand;if(null!==e){var a=d.getElementsByClassName("tb_dragger_value")[0];e.style.top="";void 0!==a&&null!==a.firstChild&&(a=a.getBoundingClientRect(),e.getBoundingClientRect().bottom>=a.top&&(e.style.top=d.offsetHeight/2+a.height+"px"))}},drag(d){if(1===d.which&&null===this.disableDrag&&!d.target.classList.contains("tb_dragger_value")&&(d.target.classList.contains("tb_dragger")||null!==d.target.closest(".tb_dragger"))){f.ActionBar.hideContextMenu();var e=d.target.closest(".tb_dragger"),
a=D(e).closest("[data-cid]")[0];this.addEdgesOptions(e);if(void 0!==a){var c=f.Models.Registry.lookup(a.getAttribute("data-cid"));if(c){var b=c.get("elType"),g="module"===b?c.get("mod_name"):b,h=[],k=null,m=null,l=null,q=d.pageY,p=d.pageX,n=0,u=null,v=null,G=null,I=[];l=null;var y=this,C=null,E,J=function(t){if(null===v){d.stopPropagation();v=!0;f.ActionBar.disable=!0;var w=e.getElementsByClassName("tb_dragger_types")[0].getElementsByClassName("current")[0];w=void 0===w?!1:w.classList.contains("tb_apply_all")?
"all":"opposite";G=e.classList.contains("tb_dragger_top")||e.classList.contains("tb_dragger_bottom")?"s":"e";l="s"===G?e.classList.contains("tb_dragger_top")?"top":"bottom":e.classList.contains("tb_dragger_left")?"left":"right";m=e.classList.contains("tb_dragger_padding")?"padding":"margin";E=D.extend(!0,{},c.get("module"===b?"mod_settings":"styling"));C=H.clone(a);n=parseFloat(e.dataset.v)||0;u=e.dataset.u;k=y.getSelector(g,m,e.getAttribute("data-id").replace("_"+l,""));void 0!==k&&""!==k&&(a=a.querySelectorAll(k),
0===a.length&&(a=null));if(null!==a){r.body.classList.add("tb_drag_start");r.body.classList.add("tb_dragger_drag");r.body.classList.add("tb_dragger_drag_"+G);x.document.body.classList.add("tb_drag_start");void 0===a[0]&&(a=[a]);for(var B=a.length-1;-1<B;--B){var A=a[B].getAttribute("data-cid")?a[B]:a[B].parentNode;A=A.children;for(var z=A.length-1;-1<z;--z)if(A[z].classList.contains("tb_dragger_"+m)){if("opposite"===w){if("s"===G&&(A[z].classList.contains("tb_dragger_left")||A[z].classList.contains("tb_dragger_right"))||
"e"===G&&(A[z].classList.contains("tb_dragger_top")||A[z].classList.contains("tb_dragger_bottom")))continue}else if("all"!==w&&!A[z].classList.contains("tb_dragger_"+l))continue;A[z].classList.add("tb_dragger_dragged");I.push(A[z].getElementsByClassName("tb_dragger_value")[0]);h.push(A[z])}}}}if(null!==a)for(B=t.clientX,z=t.clientY,t="px"===u||"%"===u?1:.1,w=e.getBoundingClientRect(),A=0,"left"===l?A=B-w.right:"right"===l?A=w.left-B:"top"===l?A=z-w.bottom:"bottom"===l&&(A=w.top-z),0<A&&(t*=2),"e"===
G?B!==p&&(n=B>p?"left"===l?n+t:n-t:"left"===l?n-t:n+t):z!==q&&(n=z>q?n+t:n-t),p=B,q=z,0>n&&"padding"===m?n=0:0!==n%1&&(n=parseFloat(n.toFixed(1))),t=n+u,B=h.length-1;-1<B;--B){w=h[B].getAttribute("data-prop");for(z=a.length-1;-1<z;--z)a[z].style[w]=t;if("margin"===m){z=h[B].classList.contains("tb_dragger_top")||h[B].classList.contains("tb_dragger_bottom")?"height":"width";A=n;var F=u;"%"===u&&(A=y.getRealPercent(h[B],n),F="px");h[B].style[z]=0>n?-A+F:A+F;h[B].style[w]=-A+F}else h[B].style[w]="%"===
u?y.getRealPercent(h[B],n)+"px":t;I[B].textContent=0===n?"":t}},w=function(g){if(!0===v&&null!==a){for(var q=null,p=h.length-1;-1<p;--p){var t=h[p].getAttribute("data-prop");y.setLivePreview(c,t,n+u,k);for(var z=a.length-1;-1<z;--z)a[z].style[t]="";0===n&&"margin"===m&&(h[p].style.width=h[p].style.height=h[p].style[t]="");h[p].setAttribute("data-v",n);h[p].setAttribute("data-u",u);h[p].classList.remove("tb_dragger_dragged");y.setData(c,h[p].getAttribute("data-id"),n,u,t);"padding"===m&&"top"===l&&
"module"===b&&(q=p)}r.body.classList.remove("tb_dragger_drag_"+G);r.body.classList.remove("tb_drag_start");x.document.body.classList.remove("tb_drag_start");r.body.classList.remove("tb_dragger_drag");null!==q&&y.setModulePosition(h[q])}r.removeEventListener("mousemove",J,{passive:!0});r.removeEventListener("mouseup",w,{once:!0,passive:!0});x.removeEventListener("mouseup",w,{once:!0,passive:!0});null!==d.target.closest(".tb_dragger_lightbox")&&null!==g.target.closest(".tb_dragger_lightbox")?(d.stopPropagation(),
y.optionsClick(d)):!0===v&&(y.onChange(),null!==f.activeModel&&f.activeModel.cid===c.cid||y.addUndo(C,E),f.ActionBar.hoverCid=f.ActionBar.disable=null);e=c=h=E=y=k=I=G=m=l=v=a=l=u=n=null};c&&(r.addEventListener("mousemove",J,{passive:!0}),r.addEventListener("mouseup",w,{once:!0,passive:!0}),x.addEventListener("mouseup",w,{once:!0,passive:!0}))}}}}};f.createStyleInstance=function(){return new O}})(jQuery,Themify,window,window.top,document,tb_app,ThemifyBuilderCommon);
