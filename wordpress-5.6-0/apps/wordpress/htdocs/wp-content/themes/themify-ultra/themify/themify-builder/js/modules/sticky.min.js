'use strict';(function(f,w,p,q){let r=!1;const x=Array.prototype.slice,B=Array.prototype.splice,y="m"===tbLocalScript.is_sticky?parseInt(tbLocalScript.breakpoints.tablet[1]):!1,C={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1},D=f(p),E=f(q);let m=[],t=[],z=p.innerHeight,u;const v=function(){if(!0!==r){var b=m.length;if(0===b)p.removeEventListener("scroll",v,{passive:!0}),p.MutationObserver&&u&&
u.disconnect(),m=[];else{var c=D.scrollTop(),e=E.height(),h=e-z;h=c>h?h-c:0;for(let l=0;l<b;++l){let a=m[l];var d=a.stickyWrapper.offset().top;let b=a.stickyElement.outerHeight();d=d-a.topSpacing-h;a.stickyWrapper.css("height",b);if(c<=d)null!==a.currentTop&&(a.stickyElement.css({width:"",position:"",top:""}).parent().removeClass(a.className),a.stickyElement.trigger("sticky-end",[a]),a.currentTop=null);else{d=e-b-a.topSpacing-a.bottomSpacing-c-h;d=0>d?d+a.topSpacing:a.topSpacing;if(a.currentTop!==
d){var k=a.stickyElement.width();if(a.getWidthFrom){var g=a.stickyElement.innerWidth()-k;k=f(a.getWidthFrom).width()-g||k}else a.widthFromWrapper&&(k=a.stickyWrapper.width());a.stickyElement.css({width:k,position:"fixed",top:d}).parent().addClass(a.className);null===a.currentTop?a.stickyElement.trigger("sticky-start",[a]):a.stickyElement.trigger("sticky-update",[a]);a.currentTop===a.topSpacing&&a.currentTop>d||null===a.currentTop&&d<a.topSpacing?a.stickyElement.trigger("sticky-bottom-reached",[a]):
null!==a.currentTop&&d===a.topSpacing&&a.currentTop<d&&a.stickyElement.trigger("sticky-bottom-unreached",[a]);a.currentTop=d}k=a.stickyWrapper.parent();g=a.stickyElement.offset().top;g+b>=k.offset().top+k.outerHeight()&&g<a.topSpacing?a.stickyElement.css({position:"absolute",top:"",bottom:0}):a.stickyElement.css({position:"fixed",top:d,bottom:""})}}}}},n={init:function(b){return this.each(function(){let c=f.extend({},C,b);var e=q.createElement("div");e.className=c.wrapperClassName;this.parentNode.insertBefore(e,
this);e.appendChild(this);e=f(this);let h=e.parent();c.center&&h.css({width:e.outerWidth(),marginLeft:"auto",marginRight:"auto"});"right"===e.css("float")&&e.css({"float":"none"}).parent().css({"float":"right"});c.stickyElement=e;c.stickyWrapper=h;c.currentTop=null;m.push(c);n.setWrapperHeight(this);n.setupChangeListeners(this)})},setWrapperHeight:function(b){b=f(b);const c=b.parent();c&&c.css("height",b.outerHeight())},setupChangeListeners:function(b){u=new p.MutationObserver(function(c){(c[0].addedNodes.length||
c[0].removedNodes.length)&&n.setWrapperHeight(b)});u.observe(b,{subtree:!0,childList:!0})},update:v,unstick:function(){return this.each(function(){let b=f(this),c=-1,e=m.length;for(;0<e--;)if(m[e].stickyElement[0]===this){B.call(m,e,1);c=e;break}-1!==c&&b.unwrap().css({width:"",position:"",top:"","float":""})})}};f.fn.sticky=function(b){if(n[b])return n[b].apply(this,x.call(arguments,1));if("object"!==typeof b&&b)f.error("Method "+b+" does not exist on jQuery.sticky");else return n.init.apply(this,
arguments)};f.fn.unstick=function(b){if(n[b])return n[b].apply(this,x.call(arguments,1));if("object"!==typeof b&&b)f.error("Method "+b+" does not exist on jQuery.sticky");else return n.unstick.apply(this,arguments)};setTimeout(v,0);p.addEventListener("scroll",v,{passive:!0});const A=function(b){const c=q.body,e=w.h;var h=q.documentElement;h=Math.max(c.scrollHeight,c.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight);for(let a=b.length-1;-1<a;--a){f(b[a]).unstick();let m=f(b[a]);var d=m.data("sticky-active"),
k=d.stick.value?parseInt(d.stick.value):0,g="px"!==d.stick.val_unit&&d.stick.val_unit?k/100*e:k;k={topSpacing:g,zIndex:null,className:"tb_sticky_scroll_active"};"bottom"===d.stick.position&&(k.topSpacing=e-b[a].offsetHeight-g);if(d.unstick)if(d.unstick.el_type&&"builder_end"!==d.unstick.el_type){var l=f(".tb_"+("row"===d.unstick.el_type?d.unstick.el_row_target?d.unstick.el_row_target:"row":d.unstick.el_mod_target?d.unstick.el_mod_target:"")).first();let c=d.unstick.value?parseInt(d.unstick.value):
0;"%"===d.unstick.val_unit&&(c=c/100*e);if(l[0]){g=h-(l.offset().top+b[a].offsetHeight+g);let f=d.unstick.current||"this";d=d.unstick.rule||"hits";"bottom"===f?g="hits"===d?g+(e-c):g+(e-(l.outerHeight(!0)+c)):"this"===f?(g=h-l.offset().top,"passes"===d&&(g-=b[a].offsetHeight)):g="hits"===d?g+c:g-c;k.bottomSpacing=g}}else d=m.closest(".themify_builder_content"),l=d.closest("#tbp_header"),l[0]&&(l=q.getElementById("tbp_content"),(l=null!==l?l.getElementsByClassName("themify_builder_content")[0]:c.getElementsByClassName("themify_builder_content")[1])&&
(d=f(l))),k.bottomSpacing=h-(d.offset().top+d.outerHeight(!0));m.sticky(k).sticky("update")}};w.on("tb_sticky_init",function(b){b instanceof jQuery&&(b=b.get());A(b)}).on("tfsmartresize",function(b){var c=m.length;r=!!(y&&b&&y>=b.w);if(0<c)for(b&&(z=b.h),b=c-1;-1<b;--b){c=m[b];let e=null;!1===r?(c.getWidthFrom&&c.responsiveWidth?e=f(c.getWidthFrom).width():c.widthFromWrapper&&(e=c.stickyWrapper.width()),null!==e&&c.stickyElement.css("width",e)):(t.push(c.stickyElement.get(0)),c.stickyElement.unstick())}else!r&&
0<t.length&&(A(t),t=[])})})(jQuery,Themify,window,document);
