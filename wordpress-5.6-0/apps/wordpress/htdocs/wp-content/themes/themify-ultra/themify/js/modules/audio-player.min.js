'use strict';(function(u,g){const D=u.isTouch?"touchstart":"click",B=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),r=function(a){a=Infinity===a?0:a;a=(new Date(1E3*a)).toISOString().substr(11,8).split(":");"00"===a[0]&&a.splice(0,1);return a.join(":")},E=function(a,f){const b=a.tracks,n=!!a.artists,e=!!a.images;a=!!a.tracknumbers;const h=g.createElement("div"),l=g.createElement("div");l.className="tf_audio_playlist";h.className="tf_playlist_current";for(let d=0,c=b.length;d<c;++d)if(b[d].src){b[d].src=
b[d].src.trim();let c=g.createElement("div"),f=g.createElement("a"),e=new Audio(b[d].src),h=g.createElement("div"),k=g.createElement("span");if(!b[d].type||e.canPlayType(b[d].type)){c.className="tf_playlist_item tf_w tf_rel";f.href=b[d].src;f.className="tf_playlist_caption tf_w";h.className="tf_playlist_length";!isNaN(e.duration)||b[d].meta&&b[d].meta.length_formatted?(h.textContent=isNaN(e.duration)?b[d].meta.length_formatted:r(e.duration),e=null):(c.className+=" tf_lazy",e.addEventListener("durationchange",
function(){h.textContent=r(this.duration);e=null;c.classList.remove("tf_lazy")},{passive:!0,once:!0}));!0===a&&(f.textContent=d+1+".");k.className="tf_playlist_title";b[d].caption?k.textContent=b[d].caption:b[d].title&&(k.textContent=b[d].title);if(!0===n&&b[d].meta&&b[d].meta.artists){let a=g.createElement("span");a.className="tf_playlist_artist";a.textContent="-"+b[d].meta.artists;f.appendChild(a)}f.appendChild(k);c.appendChild(f);c.appendChild(h);l.appendChild(c)}else b.slice(d,1)}else b.slice(d,
1);let q=!0;l.addEventListener("click",function(a){var c=a.target.closest(".tf_playlist_caption"),d=c.parentNode.classList.contains("tf_audio_current");if(c){a.preventDefault();a.stopPropagation();if(!d||f.paused)if(d)f.play();else{var m=this.getElementsByClassName("tf_audio_current")[0];const l=u.convert(this.children).indexOf(c.parentNode);a=g.createElement("div");d=g.createElement("span");a.className="tf_playlist_caption";d.className="tf_playlist_title";!1===q&&(f.pause(),f.addEventListener("loadedmetadata",
function(){this.play()},{passive:!0,once:!0}),f.setAttribute("src",c.getAttribute("href")),f.load());m&&m.classList.remove("tf_audio_current");c.parentNode.classList.add("tf_audio_current");h.innerHTML="";b[l]&&(c=b[l],e&&c.thumb&&c.thumb.src&&(m=new Image,m.src=c.thumb.src,m.width=c.thumb.width,m.height=c.thumb.height,m.decode="async",h.appendChild(m)),d.textContent=c.title?c.title:c.caption?c.caption:"",a.appendChild(d),b.meta&&(b.meta.album&&(c=g.createElement("span"),c.className=" tf_playlist_album",
c.textContent=b.meta.album,a.appendChild(c)),n&&b.meta.artists&&(c=g.createElement("span"),c.className=" tf_playlist_artist",c.textContent=b.meta.artists,a.appendChild(c))),h.appendChild(a))}q=!1}});f.parentNode.insertBefore(h,f);l.getElementsByClassName("tf_playlist_caption")[0].click();return l},A=function(a,f){const b=g.createElement("div"),n=g.createElement("div"),e=g.createElement("div"),h=g.createElement("div"),l=g.createElement("div");g.createElement("div");const q=g.createElement("div"),d=
g.createElement("input"),c=g.createElement("input"),v=g.createElement("div"),m=g.createElement("div"),t=g.createElement("div"),p=g.createElement("button"),k=g.createElement("button"),w=g.createElement("div");var x=a.parentNode.closest(".track");const y=g.createElement("div"),A=f&&f.tracks&&!0;let z=!0,C=!1;b.className="tf_audio_container tf_w tf_rel tf_box";n.className="tf_audio_wrap tf_w tf_rel tf_box";t.className="tf_audio_controls";e.className="tf_audio_progress_wrap tf_rel tf_textl";h.className=
"tf_audio_progress_loaded tf_w tf_h tf_abs";l.className="tf_audio_progress_current tf_w tf_h tf_abs";d.className="tf_audio_progress_range tf_w tf_h tf_abs";c.min=d.min=0;c.max=d.max=100;c.type=d.type="range";d.value=0;c.value="50%";v.className="tf_audio_volumn_wrap";m.className="tf_audio_volumn_inner";c.className="tf_audio_volumn_range";p.className="tf_audio_mute";k.className="tf_auido_play";k.tabIndex=p.tabIndex=0;a.muted&&(p.className+=" tf_muted");w.className="tf_audio_current_time";y.className=
"tf_audio_total_time";q.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc";w.textContent=r(a.currentTime);y.textContent=r(a.duration);k.addEventListener("click",function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());a.paused?a.play():a.pause()});x&&(x=x.getElementsByClassName("track-title")[0])&&x.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();k.click()});p.addEventListener(D,function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());
a.muted=!a.muted},{passive:"click"!==D});u.isTouch||e.addEventListener("mouseenter",function(){if(!isNaN(a.duration)){q.classList.remove("tf_hide");const b=this.clientWidth,c=parseFloat(q.clientWidth/2),d=a.duration,f=function(a){const f=void 0!==a.layerX?a.layerX:a.offsetX;0<f-c&&a.layerX<=b&&(q.style.transform="translateX("+(f-c)+"px)",q.textContent=r(parseFloat(f/b)*d))};this.addEventListener("mouseleave",function(){q.classList.add("tf_hide");this.removeEventListener("mousemove",f,{passive:!0})},
{passive:!0,once:!0});this.addEventListener("mousemove",f,{passive:!0})}},{passive:!0});d.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||(a.paused||!0!==z||a.pause(),C=!0,b=parseInt(this.value),a.currentTime=100===b?a.duration-1:parseFloat(b*a.duration/100).toFixed(4))});d.addEventListener("change",function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||(C=z=!1,a.paused&&a.play().then(a=>{z=!0}).catch(a=>{z=!0}))});a.addEventListener("progress",
function(){0<this.buffered.length&&(h.style.transform="scaleX("+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+")")},{passive:!0});a.addEventListener("durationchange",function(){y.textContent=r(this.duration)},{passive:!0});a.addEventListener("waiting",function(){e.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("emptied",function(){e.classList.add("tf_audio_waiting");
this.addEventListener("playing",function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("pause",function(){k.classList.remove("tf_audio_playing")},{passive:!0});a.addEventListener("play",function(){k.classList.add("tf_audio_playing");const a=g.getElementsByTagName("audio");for(let b=a.length-1;-1<b;--b)a[b]!==this&&a[b].pause()},{passive:!0});a.addEventListener("timeupdate",function(){if(!isNaN(this.duration)){w.textContent=r(this.currentTime);let a=
parseFloat(this.currentTime/this.duration);l.style.transform="scaleX("+a.toFixed(4)+")";!1===C&&(d.value=parseInt(100*a))}},{passive:!0});B||c.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();a.volume=parseFloat(this.value/100).toFixed(3)});a.addEventListener("volumechange",function(){0!==this.volume&&p.classList.remove("tf_mute_disabled");!0===this.muted||0===this.volume?(0===this.volume&&p.classList.add("tf_mute_disabled"),p.classList.add("tf_muted")):p.classList.remove("tf_muted")},
{passive:!0});e.appendChild(h);e.appendChild(l);e.appendChild(d);e.appendChild(q);v.appendChild(p);B||(m.appendChild(c),v.appendChild(m));n.appendChild(t);n.appendChild(w);n.appendChild(e);n.appendChild(y);n.appendChild(v);b.appendChild(n);if(A){const c=b.appendChild(E(f,a)),d=g.createElement("button"),e=g.createElement("button");d.className="tf_playlist_prev tf_play_disabled";e.className="tf_playlist_next";1>=c.children.length&&(e.className+=" tf_play_disabled");d.tabIndex=e.tabIndex=0;t.addEventListener("click",
function(a){const b=a.target.classList;!b.contains("tf_play_disabled")&&(b.contains("tf_playlist_prev")||b.contains("tf_playlist_next"))&&(a.preventDefault(),a.stopPropagation(),a=c.getElementsByClassName("tf_audio_current")[0])&&(a=b.contains("tf_playlist_prev")?a.previousElementSibling:a.nextElementSibling)&&(a.getElementsByClassName("tf_playlist_caption")[0].click(),b.contains("tf_playlist_prev")?(e.classList.remove("tf_play_disabled"),b.toggle("tf_play_disabled",!a.previousElementSibling)):(d.classList.remove("tf_play_disabled"),
b.toggle("tf_play_disabled",!a.nextElementSibling)))});a.addEventListener("ended",function(){if(!e.classList.contains("tf_play_disabled"))e.click();else if(a.hasAttribute("data-loop")||a.hasAttribute("loop")){const a=c.getElementsByClassName("tf_playlist_caption")[0];a&&(d.classList.add("tf_play_disabled"),e.classList.toggle("tf_play_disabled",1>=c.children.length),a.click())}},{passive:!0});t.appendChild(d);t.appendChild(k);t.appendChild(e)}else t.appendChild(k);a.parentNode.classList.remove("tf_lazy");
a.parentNode.insertBefore(b,a)},F=function(a,f){for(let g=a.length-1;-1<g;--g){let e=a[g];if(null===e.previousElementSibling||!e.previousElementSibling.classList.contains("tf_audio_container")){if(!f){var b=e.parentNode.parentNode;if(b.classList.contains("wp-audio-playlist")){let a=b.getElementsByClassName("tf-playlist-script")[0];a||(a=b.getElementsByClassName("wp-playlist-script")[0]);a&&(f=JSON.parse(a.textContent),"audio"!==f.type&&(f=!1))}}if(!e.hasAttribute("src")&&!e.getElementsByTagName("source")[0]){if(!f||
!f.tracks)continue;b=f.tracks[0].src;if(!b)for(let a=1,e=f.tracks.length;a<e;++a)if(f.tracks[a].src){b=f.tracks[a].src;break}if(!b)continue;e.setAttribute("src",b)}4===e.readyState?A(e,f):u.requestIdleCallback(function(){e.addEventListener("loadedmetadata",function(){A(this,f)},{passive:!0,once:!0});e.setAttribute("preload","metadata");!0===B&&e.load()},200)}}};u.on("tf_audio_init",function(a,f){a instanceof jQuery?a=a.get():void 0===a.length&&(a=[a]);F(a,f)})})(Themify,document);
